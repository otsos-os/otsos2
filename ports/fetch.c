#define SYS_WRITE 1
#define SYS_UNAME 63
#define SYS_EXIT 60
#define STDOUT 1

struct utsname {
  char sysname[65];
  char nodename[65];
  char release[65];
  char version[65];
  char machine[65];
  char domainname[65];
};

static long syscall1(long num, long arg1) {
  long ret;
  __asm__ volatile("syscall"
                   : "=a"(ret)
                   : "a"(num), "D"(arg1)
                   : "rcx", "r11", "memory");
  return ret;
}

static long syscall3(long num, long arg1, long arg2, long arg3) {
  long ret;
  __asm__ volatile("syscall"
                   : "=a"(ret)
                   : "a"(num), "D"(arg1), "S"(arg2), "d"(arg3)
                   : "rcx", "r11", "memory");
  return ret;
}

static unsigned long strlen(const char *s) {
  unsigned long len = 0;
  while (s[len])
    len++;
  return len;
}

static void print(const char *s) {
  syscall3(SYS_WRITE, STDOUT, (long)s, strlen(s));
}

void _start(void) {
  struct utsname name;
  if (syscall1(SYS_UNAME, (long)&name) == 0) {
    print(
  "@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
  "@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@+@@@@@##@@@@@:@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
  "@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%#@@@@**@@@@+@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
  "@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@##@@@**@@@*@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
  "@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
  "@@@@@@@@@@@@@@@@@@@@@@@@@@@%++++****++++++****+++++*@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
  "@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
  "@@@@@@@@@@@@@@@@@@@@@@@@@@@*#@@@@@%%@@@@@@@%%%@@@@@+%@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
  "@@@@@@@@@@@@@@@@@@@@@@@@@@@+@@@@@:#@:*@@@@==@+=@@@@+#@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
  "@@@@@@@@@@@@@@@@@@@@@@@@@@@+@@@@@:#@:*@@@@==@+=@@@@+#@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
  "@@@@@@@@%%%=---=##%@@@@@@@@**@@@@@@@@@@@@@@@@@@@@@%+%@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
  "@@@@@@#---------:---+%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
  "@@@@@+--=---------=---#@@@@@@@@@@+#@@@@@@@@@@@@=%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
  "@@@@#--%%%------=%%#---#@@@@@@@@@=@@@@@@@@@@@@@=%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
  "@@@%----*=--+++---*=---+%@@@@@@@@=%@@@@@@@@@@@@=%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
  "@@@%-=++**++#%#==#+++=--*@@@@@@@@@%@@@#*****@@%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
  "@@@%-**+**+=-#-=+#++*+---#@@@@@@@@@+@@@@#%@+@@+@#%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
  "@@@%--+*=+****###+=*+-----+%@@@@@@*#@@@=#@@#@#@@@+@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
  "@@@%===-----------------------+*#@#%@@@@#%@@%#@@@+@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
  "@@@%================================+%@@@*@@*%@@##@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
  "@@@@#===================================#%@@@@@@@@@@@@@@@@@%*===%@@@@@@@@@@@@@@\n"
  "@@@@%*====================================*#@@@@@@@@@@@@%#==*%#%@@@@@@@@@@@@@@@\n"
  "@@@@@#+=====================================+*%@@@@@@@@%+===*%%@@@@@@@@@@@@@@@@\n"
  "@@@@@@#+========+====+=======++===============++*%%%%%+====++*%@@@@@@@@@@@@@@@@\n"
  "@@@@@@@%*++++++++++++#*+++++++#*++++++++++++++++++++++++++######%@@@@@@@@@@@@@@\n"
  "@@@@@%#*%%*++++++++++#%*+++++++##++++++++++++++++++++++++++++++++*%@@@@@@@@@@@@\n"
  "@@@%#****#%#*+++++++++##*++++++++%*+++++++++++++++++++*+++++++++***#@@@@@@@@@@@\n"
  "@%#********#@@##*******#%#**++****%****++*++******##@@@@@@%*******###%@@@@@@@@@\n"
  "@@%%%%%%%%@@@@@@@%%####**%%%**#**%%******####%%%@@@@@@@@@@@@@@@%%%%%%@@@@@@@@@@\n"
  "@@@@@@@@@@@@@@@@@@@@@@@@@@@%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
  "@@@@@@@@@@@@@@@@@@@@@@@@@@@##@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
  "@@@@@@@@@@@@@@@@@@@%+++*@@=..+%@@+++*@@*+++*@@@++=+@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
  "@@@@@@@@@@@@@@@@@@@.*@%::@#::@@@.=@@@@=.+@%.=@::%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
  "@@@@@@@@@@@@@@@@@@%.#@@::@%::@@@*::.#@=.*@@.=@#::.+%@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
  "@@@@@@@@@@@@@@@@@@@:=#*:+@%::#@%###:.%+.=#*.*@#**-.*@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
  "@@@@@@@@@@@@@@@@@@@@%%%@@@@@%%@@%%%%@@@@%%%@@@%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
    );
    print("\nOS: "); print(name.sysname); print(" "); print(name.release); print("\n");
    print("Host: "); print(name.nodename); print("\n");
    print("Kernel: "); print(name.version); print("\n");
    print("Arch: "); print(name.machine); print("\n");
  } else {
    print("fetch: uname failed\n");
  }
  syscall1(SYS_EXIT, 0);
}
