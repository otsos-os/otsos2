set timeout=3
set default=0

# Try different video modes (UEFI sometimes has limited support)
# Fallback chain: 1024x768 -> 800x600 -> 640x480 -> auto
set gfxmode=1024x768x32,800x600x32,640x480x32,auto
set gfxpayload=keep

# Load video modules
insmod all_video
insmod gfxterm
insmod vbe
insmod vga

# Try to set terminal
if terminal_output gfxterm; then
    true
fi

menuentry "OTSOS (Graphics)" {
    set gfxpayload=keep
    multiboot2 /boot/kernel.bin
    boot
}

menuentry "OTSOS (Text Mode - VGA)" {
    set gfxpayload=text
    multiboot2 /boot/kernel.bin
    boot
}
